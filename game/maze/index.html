<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Camcookie Maze</title>
  <style>
    /* Reset & Base */
    * { box-sizing:border-box; margin:0; padding:0; }
    html, body { width:100%; height:100%; overflow:hidden; font-family:sans-serif; background:#111; color:#fff; }
    body.light { --bg:#f0f0f; --fg:#111; --btn-bg:#fff; --btn-fg:#333; }
    body.dark  { --bg:#000;   --fg:#eee; --btn-bg:#333; --btn-fg:#fff; }
    body.neon  { --bg:#111;   --fg:#0f0; --btn-bg:#0f0; --btn-fg:#111; }
    body, button, canvas, .screen { user-select:none; }
    input, select { user-select:text; }

    /* Buttons & Inputs */
    button, input, select {
      font-size:1rem; padding:.8rem 1.2rem; margin:.5rem; border:none; border-radius:8px;
      transition:transform .2s, box-shadow .2s; cursor:pointer;
    }
    button { background:var(--btn-bg); color:var(--btn-fg); }
    button:hover { transform:scale(1.05); box-shadow:0 4px 8px rgba(0,0,0,.3); }
    input, select { background:#fff; color:#333; box-shadow:0 2px 4px rgba(0,0,0,.2); }
    input:focus, select:focus { outline:none; box-shadow:0 0 0 3px #ffe100; }

    /* Screens */
    .screen {
      position:absolute; top:0; left:0; width:100vw; height:100vh;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      background:linear-gradient(135deg,#667eea,#764ba2); text-align:center;
    }
    .hidden { display:none!important; }
    h1 { font-size:2.5rem; margin-bottom:1rem; }
    ul { list-style:none; padding:0; }
    canvas { display:block; width:100vw; height:100vh; background:var(--bg); }

    /* Settings button */
    .settings-btn {
      position:absolute; top:1rem; left:1rem; font-size:1.5rem;
      background:var(--btn-bg); color:var(--btn-fg); z-index:100;
    }

    /* Modal */
    .modal-backdrop {
      position:fixed; top:0; left:0; width:100vw; height:100vh;
      background:rgba(0,0,0,.7); display:flex; align-items:center; justify-content:center; z-index:200;
    }
    .modal {
      background:#222; padding:2rem; border-radius:12px; width:80vw; max-width:400px; color:#fff;
    }
    .modal h2 { margin-bottom:1rem; }
    .modal label { display:block; margin:.5rem 0; }
    .modal button { margin-top:1rem; }

    /* Overlays */
    #timerDisplay, #fpsCounter, #levelSplash, #leaderboard {
      position:absolute; z-index:50; color:#fff; padding:.5rem 1rem; border-radius:6px;
    }
    #timerDisplay { top:1rem; left:50%; transform:translateX(-50%); background:rgba(0,0,0,.6); }
    #fpsCounter  { top:1rem; right:1rem; background:rgba(0,0,0,.6); color:#ff0; }
    #levelSplash {
      top:40%; width:100%; text-align:center; font-size:3rem; color:#ffe100; opacity:0;
      pointer-events:none; animation:splashIn 1.2s ease-out;
    }
    @keyframes splashIn {
      0%{opacity:0;transform:scale(0.5)}50%{opacity:1;transform:scale(1.2)}100%{opacity:0;transform:scale(1)}
    }
    #leaderboard { top:1rem; right:1rem; background:rgba(0,0,0,.6); color:#0f0; max-width:200px; }
    /* TOUCH CONTROLS */
#touch-controls {
  position: absolute;
  bottom: 1rem;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: .5rem;
  z-index: 100;
}
#touch-controls button {
  width: 3rem;
  height: 3rem;
  font-size: 1.5rem;
  background: rgba(255,255,255,0.6);
  color: #111;
}
  </style>
</head>
<body class="light">

  <!-- Settings -->
  <button id="btn-settings" class="settings-btn hidden">⚙️</button>
  <div id="settingsModal" class="hidden">
    <div class="modal-backdrop"></div>
    <div class="modal">
      <h2>Settings</h2>
      <label>Theme:
        <select id="setting-theme">
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="neon">Neon</option>
        </select>
      </label>
      <label><input id="setting-audio" type="checkbox" /> Audio</label>
      <label><input id="setting-timer"  type="checkbox" /> Timed Challenge</label>
      <label>Duration:
        <input id="setting-timer-duration" type="number" value="60" min="10" style="width:4rem" />
      </label>
      <label><input id="setting-show-fps" type="checkbox" /> Show FPS</label>
      <label><input id="setting-hints" type="checkbox" /> Mini-map Hints</label>
      <p style="font-size:.9rem; color:#ccc; margin-top:1rem">
        Notice: parental controls & official accounts coming soon.
      </p>
      <button id="settingsSave">Save</button>
      <button id="settingsCancel">Cancel</button>
    </div>
  </div>

  <!-- 1) Choose -->
  <div id="choose" class="screen">
    <h1>Camcookie Maze</h1>
    <button id="btn-solo">Play Solo</button>
    <button id="btn-live">Play Live</button>
  </div>

  <!-- 2) Live Login -->
  <div id="live-login" class="screen hidden">
    <h1>Live Room</h1>
    <input id="live-name" placeholder="Username" />
    <button id="btn-create">Create Room</button>
    <input id="live-code" placeholder="Room Code" />
    <button id="btn-join">Join Room</button>
    <p id="live-err" style="color:#f88"></p>
  </div>

  <!-- 3) Lobby -->
  <div id="lobby-screen" class="screen hidden">
    <h1>Room: <span id="room-code"></span></h1>
    <ul id="players-list"></ul>
    <div>
      <label>View:
        <select id="view-mode">
          <option value="play">Play</option>
          <option value="map">Map</option>
        </select>
      </label>
      <label>Levels:
        <input id="level-count" type="number" min="1" value="3" style="width:4rem" />
      </label>
    </div>
    <button id="btn-start">Start Game</button>
    <p>Share Link:</p>
    <input id="share-link" readonly style="width:80%" />
  </div>

  <!-- 4) Play -->
  <div id="play-screen" class="hidden">
    <canvas id="playCanvas"></canvas>
    <div id="levelSplash"></div>
    <div id="timerDisplay" class="hidden"></div>
    <div id="fpsCounter" class="hidden"></div>
    <div id="touch-controls" class="hidden">
    <button id="btn-up">↑</button>
    <button id="btn-left">←</button>
    <button id="btn-down">↓</button>
    <button id="btn-right">→</button>
  </div>
  </div>

  <!-- 5) Map -->
  <div id="map-screen" class="hidden">
    <canvas id="mapCanvas"></canvas>
    <div id="leaderboard"></div>
  </div>

  <!-- Socket.IO client local copy -->
  <script src="https://camcookie876.github.io/game/maze/socket.io.min.js"></script>
  <!-- Maintenance -->
  <script src="https://camcookie876.github.io/game/maze/redirect.js?web=game"></script>
  <!-- Main logic -->
  <script src="https://camcookie876.github.io/game/maze/script.js"></script>
  <!-- Block right-click outside inputs -->
  <script>
    document.addEventListener('contextmenu', e => {
      if (!['input','textarea','select'].includes(e.target.tagName.toLowerCase()))
        e.preventDefault();
    });
  </script>
</body>
</html>