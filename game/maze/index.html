<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Camcookie Maze</title>
  <style>
    /* Reset & base */
    * { box-sizing:border-box; margin:0; padding:0 }
    html,body { width:100%; height:100%; font-family:sans-serif;
      background:#111; color:#fff; overflow:hidden }
    .screen {
      position:absolute; top:0;left:0;width:100vw;height:100vh;
      display:flex; flex-direction:column;
      align-items:center;justify-content:center;
      background:linear-gradient(135deg,#667eea,#764ba2);
      text-align:center;
    }
    .hidden { display:none!important }
    h1 { font-size:2rem; margin-bottom:1rem }
    button,input,select {
      font-size:1rem; padding:.6rem 1rem; margin:.4rem;
      border:none; border-radius:6px; cursor:pointer;
    }
    canvas { background:#0099ff; display:block; margin:auto }
    #levelSplash {
      position:absolute; top:40%; width:100%;
      text-align:center; font-size:2.5rem; color:#ffe100;
      animation:splashIn 1.2s ease-out; opacity:0;
    }
    @keyframes splashIn {
      0%{opacity:0;transform:scale(.5)}
      50%{opacity:1;transform:scale(1.1)}
      100%{opacity:0}
    }
    #btn-settings {
      position:absolute; top:1rem;right:1rem;
      display:none; background:rgba(255,255,255,.8);
    }
    #settingsModal .backdrop {
      position:fixed;top:0;left:0;width:100vw;height:100vh;
      background:rgba(0,0,0,.7);
      display:flex; align-items:center;justify-content:center;
      z-index:200;
    }
    #settingsModal .modal {
      background:#222; padding:1rem; border-radius:8px;
      width:80%;max-width:320px; color:#fff;
    }
    #settingsModal label { display:block; margin:.5rem 0 }
  </style>
</head>
<body>

  <!-- Settings -->
  <button id="btn-settings">⚙️</button>
  <div id="settingsModal" class="hidden">
    <div class="backdrop">
      <div class="modal">
        <h2>Settings (Host Only)</h2>
        <label>Border Color:
          <input type="color" id="setting-border" value="#222222">
        </label>
        <label>Theme:
          <select id="setting-theme">
            <option>light</option><option>dark</option><option>neon</option>
          </select>
        </label>
        <button id="settingsSave">Save</button>
        <button id="settingsCancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- 1) Choose -->
  <div id="choose" class="screen">
    <h1>Camcookie Maze</h1>
    <button id="btn-solo">Play Solo</button>
    <button id="btn-live">Play Live</button>
  </div>

  <!-- 2A) Live Create -->
  <div id="live-create" class="screen hidden">
    <h1>Create Room</h1>
    <input id="live-name-create" placeholder="Username">
    <button id="btn-create">Create Room</button>
    <button id="btn-to-join">Join Instead</button>
    <p id="live-err-create" style="color:#f88;"></p>
  </div>

  <!-- 2B) Live Join -->
  <div id="live-join" class="screen hidden">
    <h1>Join Room</h1>
    <input id="live-name-join" placeholder="Username">
    <input id="live-code" placeholder="Room Code">
    <button id="btn-join">Join Room</button>
    <button id="btn-to-create">Create Instead</button>
    <p id="live-err-join" style="color:#f88;"></p>
  </div>

  <!-- 3) Lobby -->
  <div id="lobby" class="screen hidden">
    <h1>Room: <span id="room-code"></span></h1>
    <ul id="players-list"></ul>
    <label>Levels:
      <input type="number" id="level-count" min="1" value="3" style="width:4rem">
    </label>
    <button id="btn-start">Start Game</button>
  </div>

  <!-- 4) Play -->
  <div id="play" class="screen hidden">
    <canvas id="playCanvas"></canvas>
    <div id="levelSplash"></div>
  </div>

  <!-- 5) Map -->
  <div id="map" class="screen hidden">
    <canvas id="mapCanvas"></canvas>
    <div id="leaderboard"></div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <script src="https://camcookie876.github.io/redirect.js?web=game"></script>
  <script src="https://camcookie876.github.io/game/maze/script.jsscript.js"></script>
</body>
</html>