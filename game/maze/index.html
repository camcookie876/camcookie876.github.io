<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Camcookie Maze</title>
  <style>
    /* RESET & BASE */
    * { box-sizing:border-box; margin:0; padding:0 }
    html,body { width:100%; height:100%; overflow:hidden; background:#111; color:#fff; font-family:sans-serif }
    body.light { --bg:#f0f0f0; --fg:#111; --btn-bg:#fff; --btn-fg:#333 }
    body.dark  { --bg:#000000; --fg:#eee; --btn-bg:#333; --btn-fg:#fff }
    body.neon  { --bg:#111; --fg:#0f0; --btn-bg:#0f0; --btn-fg:#111 }
    body, button, canvas, .screen { user-select:none }
    input, select { user-select:text }

    /* BUTTONS & INPUTS */
    button, input, select {
      font-size:1rem; padding:.6rem 1rem; margin:.4rem; border:none; border-radius:6px;
      transition:transform .2s, box-shadow .2s; cursor:pointer;
    }
    button { background:var(--btn-bg); color:var(--btn-fg) }
    button:hover { transform:scale(1.05); box-shadow:0 3px 6px rgba(0,0,0,.3) }
    input, select { background:#fff; color:#333; box-shadow:0 2px 4px rgba(0,0,0,.2) }
    input:focus, select:focus { outline:none; box-shadow:0 0 0 2px #ffe100 }

    /* SCREENS */
    .screen {
      position:absolute; top:0; left:0; width:100vw; height:100vh;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      background:linear-gradient(135deg,#667eea,#764ba2); text-align:center
    }
    .hidden { display:none!important }
    h1 { font-size:2rem; margin-bottom:1rem }

    /* CANVAS */
    canvas {
      background:var(--bg); display:block;
      margin:auto; /* for centering within screen */
    }

    /* SETTINGS BUTTON */
    #btn-settings {
      position:absolute; top:1rem; left:1rem; font-size:1.2rem;
      padding:.4rem .8rem; display:none; z-index:100;
    }

    /* SETTINGS MODAL */
    #settingsModal.hidden { display:none }
    #settingsModal .modal-backdrop {
      position:fixed; top:0; left:0; width:100vw; height:100vh;
      background:rgba(0,0,0,.7); display:flex; align-items:center; justify-content:center;
      z-index:200
    }
    #settingsModal .modal {
      background:#222; padding:1.5rem; border-radius:8px; width:80vw; max-width:350px;
      text-align:left; color:#fff
    }
    #settingsModal .modal h2 { margin-bottom:.5rem }
    #settingsModal .modal label { display:block; margin:.5rem 0 }

    /* OVERLAYS */
    #timerDisplay, #fpsCounter, #levelSplash, #leaderboard {
      position:absolute; z-index:50; padding:.4rem .8rem; border-radius:4px;
    }
    #timerDisplay { top:1rem; left:50%; transform:translateX(-50%); background:rgba(0,0,0,.6); }
    #fpsCounter  { top:1rem; right:1rem; background:rgba(0,0,0,.6); color:#ff0; }
    #levelSplash {
      top:40%; width:100%; text-align:center; font-size:2.5rem; color:#ffe100;
      opacity:0; pointer-events:none; animation:splashIn 1.2s ease-out
    }
    @keyframes splashIn {
      0%{opacity:0;transform:scale(0.5)}50%{opacity:1;transform:scale(1.1)}100%{opacity:0;transform:scale(1)}
    }
    #leaderboard {
      top:1rem; right:1rem; background:rgba(0,0,0,.6); color:#0f0; max-width:200px
    }

    /* SOLO CONTROLS */
    #solo-controls { margin-bottom:1rem }
    #solo-controls label { display:inline-block; margin:.3rem }

    /* LIVE LOGIN COLOR PICKER */
    #live-color { margin-left:.5rem }

    /* QR JOIN HINT */
    #qr-hint {
      position:absolute; bottom:1rem; left:50%; transform:translateX(-50%);
      background:rgba(255,255,255,.2); padding:.4rem .8rem; border-radius:4px;
      font-size:.9rem
    }

  </style>
</head>
<body class="light">

  <!-- SETTINGS BUTTON -->
  <button id="btn-settings">⚙️</button>

  <!-- SETTINGS MODAL -->
  <div id="settingsModal" class="hidden">
    <div class="modal-backdrop"></div>
    <div class="modal">
      <h2>Settings (Admin Only)</h2>
      <label>Maze Color:
        <input type="color" id="setting-maze-color" value="#222222" />
      </label>
      <label>Theme:
        <select id="setting-theme">
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="neon">Neon</option>
        </select>
      </label>
      <label><input type="checkbox" id="setting-audio" /> Audio</label>
      <button id="settingsSave">Save</button>
      <button id="settingsCancel">Cancel</button>
    </div>
  </div>

  <!-- 1) CHOOSE SCREEN -->
  <div id="choose" class="screen">
    <div id="solo-controls">
      <label>Maze Color:
        <input type="color" id="solo-maze-color" value="#222222" />
      </label>
      <label>Your Color:
        <input type="color" id="solo-player-color" value="#00AAFF" />
      </label>
    </div>
    <h1>Camcookie Maze</h1>
    <button id="btn-solo">Play Solo</button>
    <button id="btn-live">Play Live</button>
  </div>

  <!-- 2) LIVE LOGIN -->
  <div id="live-login" class="screen hidden">
    <h1>Join Live Game</h1>
    <input id="live-name" placeholder="Username" />
    <label>Your Color:
      <input type="color" id="live-color" value="#FF5555" />
    </label>
    <div id="qr-hint">Scan QR or use “Join Code” button below</div>
    <button id="btn-create">Create Room</button>
    <button id="btn-qr-join">Join via QR</button>
    <button id="btn-join-code">Join via Code</button>
    <div id="join-code-entry" class="hidden">
      <input id="live-code" placeholder="Room Code" />
      <button id="btn-join">Join Room</button>
    </div>
    <p id="live-err" style="color:#f88"></p>
  </div>

  <!-- 3) LOBBY SCREEN -->
  <div id="lobby-screen" class="screen hidden">
    <h1>Room: <span id="room-code"></span></h1>
    <ul id="players-list"></ul>
    <div>
      <label>View:
        <select id="view-mode">
          <option value="play">Play</option>
          <option value="map">Map</option>
        </select>
      </label>
      <label>Levels:
        <input type="number" id="level-count" min="1" value="3" style="width:4rem" />
      </label>
    </div>
    <button id="btn-start">Start Game</button>
    <p style="font-size:.9rem; margin-top:.5rem;">
      Only admin (creator) can share code. Codes Reset at midnight UTC.
    </p>
  </div>

  <!-- 4) PLAY SCREEN -->
  <div id="play-screen" class="screen hidden">
    <canvas id="playCanvas"></canvas>
    <div id="levelSplash"></div>
    <div id="timerDisplay" class="hidden"></div>
    <div id="fpsCounter" class="hidden"></div>
  </div>

  <!-- 5) MAP SCREEN -->
  <div id="map-screen" class="screen hidden">
    <canvas id="mapCanvas"></canvas>
    <div id="leaderboard"></div>
  </div>

  <!-- Scripts -->
  <script src="https://camcookie876.github.io/game/maze/socket.io.min.js"></script>
  <script src="https://camcookie876.github.io/game/maze/redirect.js?web=game"></script>
  <script src="https://camcookie876.github.io/game/maze/script.js"></script>
  <script>
    document.addEventListener('contextmenu', e => {
      if (!['input','textarea','select'].includes(e.target.tagName.toLowerCase()))
        e.preventDefault();
    });
  </script>
</body>
</html>